(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{185:function(t,s,a){"use strict";a.r(s);var r=a(0),n=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),a("p",[t._v("在全局模块 "),a("code",[t._v("AppStore")]),t._v(" 中，提供了插件管理功能（"),a("code",[t._v("pluginHub")]),t._v("）。")]),t._v(" "),a("p",[t._v("使用者可以注册自己的插件，也可以使用内置的插件："),a("a",{attrs:{href:"#jsbridge-%E6%8F%92%E4%BB%B6"}},[t._v("JSBridge 插件")]),t._v("、"),a("a",{attrs:{href:"#feedback-%E4%BA%A4%E4%BA%92%E5%8F%8D%E9%A6%88%E6%8F%92%E4%BB%B6"}},[t._v("交互反馈插件")]),t._v("、"),a("a",{attrs:{href:"#log-%E6%97%A5%E5%BF%97%E6%8F%92%E4%BB%B6"}},[t._v("日志插件")]),t._v("、"),a("a",{attrs:{href:"#requester-%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E6%8F%92%E4%BB%B6"}},[t._v("数据请求插件")]),t._v("、"),a("a",{attrs:{href:"#route-%E5%BA%94%E7%94%A8%E5%86%85%E8%B7%AF%E7%94%B1%E6%8F%92%E4%BB%B6"}},[t._v("应用内路由插件")]),t._v("、"),a("a",{attrs:{href:"#trace-%E4%B8%9A%E5%8A%A1%E5%9F%8B%E7%82%B9%E6%8F%92%E4%BB%B6"}},[t._v("业务埋点插件")]),t._v("。")]),t._v(" "),a("p",[t._v("内部插件可以通过 "),a("code",[t._v("usePlugins")]),t._v(" 访问。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setupPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePlugins "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用插件 API")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#插件管理"}},[t._v("插件管理")]),a("ul",[a("li",[a("a",{attrs:{href:"#register-pluginclass"}},[t._v("register(PluginClass)")])]),a("li",[a("a",{attrs:{href:"#get-pluginclass"}},[t._v("get(PluginClass)")])])])]),a("li",[a("a",{attrs:{href:"#插件基类-plugin"}},[t._v("插件基类 Plugin")]),a("ul",[a("li",[a("a",{attrs:{href:"#type"}},[t._v("type")])]),a("li",[a("a",{attrs:{href:"#init-getplugin"}},[t._v("init(getPlugin)")])]),a("li",[a("a",{attrs:{href:"#destroy"}},[t._v("destroy()")])])])]),a("li",[a("a",{attrs:{href:"#全局插件管理模块"}},[t._v("全局插件管理模块")]),a("ul",[a("li",[a("a",{attrs:{href:"#init"}},[t._v("init()")])]),a("li",[a("a",{attrs:{href:"#destroy"}},[t._v("destroy()")])]),a("li",[a("a",{attrs:{href:"#register-pluginclass"}},[t._v("register(PluginClass)")])]),a("li",[a("a",{attrs:{href:"#get-pluginclass"}},[t._v("get(PluginClass)")])])])]),a("li",[a("a",{attrs:{href:"#jsbridge-插件"}},[t._v("JSBridge 插件")]),a("ul",[a("li",[a("a",{attrs:{href:"#pushwindow-url-params"}},[t._v("pushWindow(url, params?)")])]),a("li",[a("a",{attrs:{href:"#getcurrentlocation-options"}},[t._v("getCurrentLocation(options)")])]),a("li",[a("a",{attrs:{href:"#getstartupparams-options"}},[t._v("getStartupParams(options?)")])]),a("li",[a("a",{attrs:{href:"#reportbizready"}},[t._v("reportBizReady()")])]),a("li",[a("a",{attrs:{href:"#getuserinfo"}},[t._v("getUserInfo()")])]),a("li",[a("a",{attrs:{href:"#getsysteminfo"}},[t._v("getSystemInfo()")])]),a("li",[a("a",{attrs:{href:"#getnetworktype"}},[t._v("getNetworkType()")])]),a("li",[a("a",{attrs:{href:"#getstorageitem-key"}},[t._v("getStorageItem(key)")])]),a("li",[a("a",{attrs:{href:"#setstorageitem-key-value"}},[t._v("setStorageItem(key, value)")])]),a("li",[a("a",{attrs:{href:"#getcurrenturl"}},[t._v("getCurrentUrl()")])]),a("li",[a("a",{attrs:{href:"#callbridge-api-args"}},[t._v("callBridge(api, ...args?)")])])])]),a("li",[a("a",{attrs:{href:"#feedback-交互反馈插件"}},[t._v("Feedback 交互反馈插件")]),a("ul",[a("li",[a("a",{attrs:{href:"#addtoast-options"}},[t._v("addToast(options)")])]),a("li",[a("a",{attrs:{href:"#addalert-options"}},[t._v("addAlert(options)")])]),a("li",[a("a",{attrs:{href:"#addconfirm-options"}},[t._v("addConfirm(options)")])]),a("li",[a("a",{attrs:{href:"#addprompt-options"}},[t._v("addPrompt(options)")])])])]),a("li",[a("a",{attrs:{href:"#requester-数据请求插件"}},[t._v("Requester 数据请求插件")]),a("ul",[a("li",[a("a",{attrs:{href:"#requesttwa-api-params-options"}},[t._v("requestTWA(api, params?, options?)")])]),a("li",[a("a",{attrs:{href:"#requesth5data-path-basementprojectname-options"}},[t._v("requestH5Data(path, basementProjectName, options?)")])]),a("li",[a("a",{attrs:{href:"#sendrequest-url"}},[t._v("sendRequest(url)")])])])]),a("li",[a("a",{attrs:{href:"#route-应用内路由插件"}},[t._v("Route 应用内路由插件")]),a("ul",[a("li",[a("a",{attrs:{href:"#path"}},[t._v("path")])]),a("li",[a("a",{attrs:{href:"#query"}},[t._v("query")])]),a("li",[a("a",{attrs:{href:"#redirect-url-params"}},[t._v("redirect(url, params?)")])]),a("li",[a("a",{attrs:{href:"#back-n-defaulturl"}},[t._v("back(n, defaultUrl?)")])]),a("li",[a("a",{attrs:{href:"#backto-url-options"}},[t._v("backTo(url, options?)")])]),a("li",[a("a",{attrs:{href:"#replace-url-params"}},[t._v("replace(url, params?)")])]),a("li",[a("a",{attrs:{href:"#pushwindow-url-params"}},[t._v("pushWindow(url, params?)")])]),a("li",[a("a",{attrs:{href:"#popwindow"}},[t._v("popWindow()")])]),a("li",[a("a",{attrs:{href:"#popto-delta"}},[t._v("popTo(delta)")])])])]),a("li",[a("a",{attrs:{href:"#trace-业务埋点插件"}},[t._v("Trace 业务埋点插件")]),a("ul",[a("li",[a("a",{attrs:{href:"#logpv-spmb-params"}},[t._v("logPv(spmb, params?)")])]),a("li",[a("a",{attrs:{href:"#before-name-hookfn"}},[t._v("before(name, hookFn)")])]),a("li",[a("a",{attrs:{href:"#call-methodname-args"}},[t._v("call(methodName, ...args)")])]),a("li",[a("a",{attrs:{href:"#report-params"}},[t._v("report(params)")])]),a("li",[a("a",{attrs:{href:"#get-key"}},[t._v("get(key)")])]),a("li",[a("a",{attrs:{href:"#set-config"}},[t._v("set(config)")])]),a("li",[a("a",{attrs:{href:"#click-spmid-extraparams"}},[t._v("click(spmId, extraParams?)")])]),a("li",[a("a",{attrs:{href:"#expo-spmid-extraparams"}},[t._v("expo(spmId, extraParams?)")])]),a("li",[a("a",{attrs:{href:"#pagestate-name"}},[t._v("pageState(name)")])]),a("li",[a("a",{attrs:{href:"#info-params"}},[t._v("info(params)")])]),a("li",[a("a",{attrs:{href:"#parse-value"}},[t._v("parse(value)")])]),a("li",[a("a",{attrs:{href:"#stringify-value"}},[t._v("stringify(value)")])])])]),a("li",[a("a",{attrs:{href:"#log-日志插件"}},[t._v("Log 日志插件")]),a("ul",[a("li",[a("a",{attrs:{href:"#log-msg"}},[t._v("log(msg)")])]),a("li",[a("a",{attrs:{href:"#warn-msg"}},[t._v("warn(msg)")])]),a("li",[a("a",{attrs:{href:"#debug-msg"}},[t._v("debug(msg)")])]),a("li",[a("a",{attrs:{href:"#error-msg"}},[t._v("error(msg)")])]),a("li",[a("a",{attrs:{href:"#reportduration-type-name-fn"}},[t._v("reportDuration(type, name, fn)")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"插件管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件管理"}},[t._v("#")]),t._v(" 插件管理")]),t._v(" "),a("h3",{attrs:{id:"register-pluginclass"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#register-pluginclass"}},[t._v("#")]),t._v(" register(PluginClass)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{constructor} PluginClass")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<void>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("注册插件。")]),t._v(" "),a("p",[t._v("插件应当是一个继承自 "),a("code",[t._v("Plugin")]),t._v(" 的类。")]),t._v(" "),a("p",[t._v("在应用初始化的时候，会初始化已经注册的插件。也可以在初始化完毕之后注册插件，此时当插件注册并初始化完成之后，"),a("code",[t._v("register()")]),t._v(" 返回的 "),a("code",[t._v("promise")]),t._v(" 对象才会变为 "),a("code",[t._v("resolved")]),t._v(" 状态。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AppStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Plugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Plugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BizAppStore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppStore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMyPlugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册插件并初始化完毕")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("如果想在全局模块 "),a("code",[t._v("AppStore")]),t._v(" 初始化的时候，完成自定义插件初始化，或者覆盖内置插件，可以在 "),a("code",[t._v("AppStore#getPlugins()")]),t._v(" 钩子函数中返回所有插件类。")])]),t._v(" "),a("h3",{attrs:{id:"get-pluginclass"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-pluginclass"}},[t._v("#")]),t._v(" get(PluginClass)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string | constructor} PluginClass")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{IModule} plugin")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("根据插件类型或者插件类，获取第一个已注册的插件对象。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AppStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Plugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Plugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BizAppStore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppStore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMyPlugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册插件并初始化完毕")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPluginByClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPluginByType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyPlugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])])])]),t._v(" "),a("h2",{attrs:{id:"插件基类-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件基类-plugin"}},[t._v("#")]),t._v(" 插件基类 "),a("code",[t._v("Plugin")])]),t._v(" "),a("p",[t._v("插件有统一的基类 "),a("code",[t._v("Plugin")]),t._v("，每个插件都应当继承自该类。")]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Plugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Plugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" type")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型：")]),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[a("code",[t._v("type")]),t._v(" 数据成员表明插件的类型，一个应用应当只能存在某一种类型的插件。")])])]),t._v(" "),a("h3",{attrs:{id:"init-getplugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init-getplugin"}},[t._v("#")]),t._v(" init(getPlugin)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Function} getPlugin")]),t._v(" 获取其它兄弟插件实例")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<void>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("生命周期方法，初始化插件。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Plugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Plugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ILog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JSBridge "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Plugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("getPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GetPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" getPlugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ILog "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" IModule"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bridge "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSBridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"destroy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#destroy"}},[t._v("#")]),t._v(" destroy()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("生命周期方法，销毁实例。")])])]),t._v(" "),a("h2",{attrs:{id:"全局插件管理模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局插件管理模块"}},[t._v("#")]),t._v(" 全局插件管理模块")]),t._v(" "),a("p",[t._v("单独的全局插件管理模块。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[a("strong",[t._v("注意：")])]),t._v(" "),a("p",[t._v("主要用于已存项目，新项目不要使用。")])]),t._v(" "),a("h3",{attrs:{id:"init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[t._v("#")]),t._v(" init()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("生命周期方法，初始化全局插件管理模块。")])])]),t._v(" "),a("h3",{attrs:{id:"destroy-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#destroy-2"}},[t._v("#")]),t._v(" destroy()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("生命周期方法，销毁全局插件管理模块。")])])]),t._v(" "),a("h3",{attrs:{id:"register-pluginclass-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#register-pluginclass-2"}},[t._v("#")]),t._v(" register(PluginClass)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{constructor} PluginClass")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<void>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("注册插件，当返回的 Promise 对象 resolved 之后，则说明插件已被成功注册。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" JSBridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pluginHub "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSBridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"get-pluginclass-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-pluginclass-2"}},[t._v("#")]),t._v(" get(PluginClass)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{constructor} PluginClass")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<Plugin>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取已注册的插件。如果没找到指定插件，该方法会抛出异常。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JSBridge "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npluginHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSBridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("bridgePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])])]),t._v(" "),a("h2",{attrs:{id:"jsbridge-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsbridge-插件"}},[t._v("#")]),t._v(" JSBridge 插件")]),t._v(" "),a("p",[t._v("对容器 JS API 的封装，主要做以下提升：")]),t._v(" "),a("ol",[a("li",[t._v("屏蔽底层容器 API 的 bug；")]),t._v(" "),a("li",[t._v("屏蔽底层容器 API 的繁琐度；")]),t._v(" "),a("li",[t._v("提供更加友好的 Promise 风格 API。")])]),t._v(" "),a("h3",{attrs:{id:"pushwindow-url-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pushwindow-url-params"}},[t._v("#")]),t._v(" pushWindow(url, params?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} url")])]),t._v(" "),a("li",[a("code",[t._v("{Object} params")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<void>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("跳转内部 H5 页面或者应用，包括凤蝶页、离线包应用、小程序应用等。跳转成功之后，返回的 Promise 对象变为 resolved。")]),t._v(" "),a("p",[t._v("跳转的时候，会带上全局配置中的 "),a("code",[t._v("chInfo")]),t._v(" 参数；如果没有配置 "),a("code",[t._v("chInfo")]),t._v(" 参数，但是配置了 "),a("code",[t._v("appId")]),t._v(" 参数，则使用 "),a("code",[t._v("appId")]),t._v(" 构造 "),a("code",[t._v("chInfo")]),t._v(" 参数："),a("code",[t._v("ch_[appId]")]),t._v("；否则，不带 "),a("code",[t._v("chInfo")]),t._v(" 参数。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setupPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePlugins "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://render.alipay.com/p/f/fd-jx2w06zl/index.html?chInfo=ch_internal__chsub_huodongyemian__zidingyi_pmp_mp'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"getcurrentlocation-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getcurrentlocation-options"}},[t._v("#")]),t._v(" getCurrentLocation(options)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object} options")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<Object>} location")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取定位。")]),t._v(" "),a("p",[a("code",[t._v("options")]),t._v(" 参数参考"),a("a",{attrs:{href:"https://docs.alipay.com/mini/api/mkxuqd#upyir",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方 API"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("返回的定位信息格式参考"),a("a",{attrs:{href:"https://docs.alipay.com/mini/api/mkxuqd#success-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方 API"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("如果当前页面参数上携带了定位信息，则此处会直接返回该定位信息，这样做主要是为了方便程序化地在多台设备上跑兼容性测试。")])])])]),t._v(" "),a("h3",{attrs:{id:"getstartupparams-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getstartupparams-options"}},[t._v("#")]),t._v(" getStartupParams(options?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object} options?")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<Object>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("对官方 API 的封装，参数和返回值格式都可以参考"),a("a",{attrs:{href:"http://jsapi.alipay.net/jsapi/util/get-startup-params.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"reportbizready"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reportbizready"}},[t._v("#")]),t._v(" reportBizReady()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("上报心跳，参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/hybridinspect/stargazer/heartbeats",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("在全局模块中，完成初始化之后，会调用一次该方法，不需要手动调用。")])])])]),t._v(" "),a("h3",{attrs:{id:"getuserinfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getuserinfo"}},[t._v("#")]),t._v(" getUserInfo()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取用户信息，参考"),a("a",{attrs:{href:"http://jsapi.alipay.net/jsapi/util/get-user-info.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"getsysteminfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getsysteminfo"}},[t._v("#")]),t._v(" getSystemInfo()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取系统信息，参考"),a("a",{attrs:{href:"https://docs.alipay.com/mini/api/system-info",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"getnetworktype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getnetworktype"}},[t._v("#")]),t._v(" getNetworkType()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取网络信息，参考"),a("a",{attrs:{href:"https://docs.alipay.com/mini/api/network-status",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"getstorageitem-key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getstorageitem-key"}},[t._v("#")]),t._v(" getStorageItem(key)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取本地存储数据，底层使用的是 "),a("a",{attrs:{href:"https://docs.alipay.com/mini/api/azfobl",target:"_blank",rel:"noopener noreferrer"}},[t._v("my.getStorage"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"setstorageitem-key-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setstorageitem-key-value"}},[t._v("#")]),t._v(" setStorageItem(key, value)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("存储数据到本地，底层使用的是 "),a("a",{attrs:{href:"https://docs.alipay.com/mini/api/eocm6v",target:"_blank",rel:"noopener noreferrer"}},[t._v("my.setStorage"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"getcurrenturl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getcurrenturl"}},[t._v("#")]),t._v(" getCurrentUrl()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("获取当前页面的 URL 地址，拿到的地址格式与 "),a("code",[t._v("app.json")]),t._v(" 中配置的一样。")])])]),t._v(" "),a("h3",{attrs:{id:"callbridge-api-args"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#callbridge-api-args"}},[t._v("#")]),t._v(" callBridge(api, ...args?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} api")])]),t._v(" "),a("li",[a("code",[t._v("{Array} args?")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object | Function} args[0]")])]),t._v(" "),a("li",[a("code",[t._v("{Function} args[1]")])])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("对 "),a("a",{attrs:{href:"https://docs.antfin.com/tinyapp/develop/api",target:"_blank",rel:"noopener noreferrer"}},[t._v("my.call"),a("OutboundLink")],1),t._v(" 的封装。")])])]),t._v(" "),a("h2",{attrs:{id:"feedback-交互反馈插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feedback-交互反馈插件"}},[t._v("#")]),t._v(" Feedback 交互反馈插件")]),t._v(" "),a("p",[t._v("管理全局的 alert、toast、confirm、prompt 弹窗。")]),t._v(" "),a("p",[t._v("为了避免同一个时刻弹出多个全局弹窗，本模块做了可选的“串行”控制：前一个弹窗未消失之前，下一个弹窗不会弹出。")]),t._v(" "),a("h3",{attrs:{id:"addtoast-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addtoast-options"}},[t._v("#")]),t._v(" addToast(options)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object} options")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{number} duration?")]),t._v(" 显示时长，单位为 ms，默认 2000")]),t._v(" "),a("li",[a("code",[t._v("{string} content?")]),t._v(" 内容")]),t._v(" "),a("li",[a("code",[t._v("{Function} complete?")]),t._v(" 显示结束后的回调函数")]),t._v(" "),a("li",[a("code",[t._v("{boolean} isBlock?")]),t._v(" 是否阻塞下一个弹窗")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("显示 toast 弹窗。")])])]),t._v(" "),a("h3",{attrs:{id:"addalert-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addalert-options"}},[t._v("#")]),t._v(" addAlert(options)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object} options")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} title?")]),t._v(" 标题")]),t._v(" "),a("li",[a("code",[t._v("{string} buttonText?")]),t._v(" 按钮文字，默认为“确定”")]),t._v(" "),a("li",[a("code",[t._v("{string} content?")]),t._v(" 内容")]),t._v(" "),a("li",[a("code",[t._v("{Function} complete?")]),t._v(" 显示结束后的回调函数")]),t._v(" "),a("li",[a("code",[t._v("{boolean} isBlock?")]),t._v(" 是否阻塞下一个弹窗")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("显示 alert 弹窗。")])])]),t._v(" "),a("h3",{attrs:{id:"addconfirm-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addconfirm-options"}},[t._v("#")]),t._v(" addConfirm(options)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object} options")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} title?")]),t._v(" 标题")]),t._v(" "),a("li",[a("code",[t._v("{string} okButtonText?")]),t._v(" 确认按钮文字，默认为“确定”")]),t._v(" "),a("li",[a("code",[t._v("{string} cancelButtonText?")]),t._v(" 取消按钮文字，默认为“取消”")]),t._v(" "),a("li",[a("code",[t._v("{string} content?")]),t._v(" 内容")]),t._v(" "),a("li",[a("code",[t._v("{Function} complete?")]),t._v(" 显示结束后的回调函数")]),t._v(" "),a("li",[a("code",[t._v("{boolean} isBlock?")]),t._v(" 是否阻塞下一个弹窗")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("显示 confirm 弹窗。")])])]),t._v(" "),a("h3",{attrs:{id:"addprompt-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addprompt-options"}},[t._v("#")]),t._v(" addPrompt(options)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{Object} options")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} title?")]),t._v(" 标题")]),t._v(" "),a("li",[a("code",[t._v("{string} okButtonText?")]),t._v(" 确认按钮文字，默认为“确定”")]),t._v(" "),a("li",[a("code",[t._v("{string} cancelButtonText?")]),t._v(" 取消按钮文字，默认为“取消”")]),t._v(" "),a("li",[a("code",[t._v("{string} content?")]),t._v(" 内容")]),t._v(" "),a("li",[a("code",[t._v("{Function} complete?")]),t._v(" 显示结束后的回调函数")]),t._v(" "),a("li",[a("code",[t._v("{boolean} isBlock?")]),t._v(" 是否阻塞下一个弹窗")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("显示 prompt 弹窗。")])])]),t._v(" "),a("h2",{attrs:{id:"requester-数据请求插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requester-数据请求插件"}},[t._v("#")]),t._v(" Requester 数据请求插件")]),t._v(" "),a("p",[t._v("主要处理三种类型的请求：")]),t._v(" "),a("ul",[a("li",[t._v("HTTP 请求；")]),t._v(" "),a("li",[t._v("RPC 数据请求；")]),t._v(" "),a("li",[t._v("凤蝶区块数据请求。")])]),t._v(" "),a("p",[t._v("如果全局配置中，"),a("code",[t._v("mock")]),t._v(" 配置项为 "),a("code",[t._v("true")]),t._v("，数据请求将会被定向到指定服务器（"),a("code",[t._v("mockServer")]),t._v("）。")]),t._v(" "),a("h3",{attrs:{id:"requesttwa-api-params-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requesttwa-api-params-options"}},[t._v("#")]),t._v(" requestTWA(api, params?, options?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} api")]),t._v(" 要请求的 TWA 接口地址")]),t._v(" "),a("li",[a("code",[t._v("{Object} params?")]),t._v(" 请求参数")]),t._v(" "),a("li",[a("code",[t._v("{Object} options?")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{boolean} showLoading?")]),t._v(" 是否展示加载效果")]),t._v(" "),a("li",[a("code",[t._v("{number} delay?")]),t._v(" 延迟多长时间才展示加载效果")]),t._v(" "),a("li",[a("code",[t._v("{boolean} needAuthorized?")]),t._v(" 是否需要登录验证")]),t._v(" "),a("li",[a("code",[t._v("{number} timeout?")]),t._v(" 请求超时时间")]),t._v(" "),a("li",[a("code",[t._v("{string} forward?")]),t._v(" 将请求定位到指定的机器")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("{Promise<T>}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("请求 TWA 应用接口。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setupPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePlugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePageLifeCycle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePageLifeCycle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'onLoadReady'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requester"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestTWA"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IListResponse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'passion.index.list'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"requesth5data-path-basementprojectname-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requesth5data-path-basementprojectname-options"}},[t._v("#")]),t._v(" requestH5Data(path, basementProjectName, options?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} path")]),t._v(" schema 文件在项目中的路径")]),t._v(" "),a("li",[a("code",[t._v("{string} basementProjectName")]),t._v(" 对应 Basement 上凤蝶区块项目名称")]),t._v(" "),a("li",[a("code",[t._v("{Object} options?")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{boolean} showLoading?")]),t._v(" 是否展示加载效果")]),t._v(" "),a("li",[a("code",[t._v("{number} delay?")]),t._v(" 延迟多长时间才展示加载效果")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("请求凤蝶区块数据。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setupPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePlugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePageLifeCycle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePageLifeCycle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'onLoadReady'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requester"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestH5Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IConfigData"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'config-h5data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'device'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"sendrequest-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sendrequest-url"}},[t._v("#")]),t._v(" sendRequest(url)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} url")]),t._v(" HTTP 请求地址")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("发送 HTTP GET 请求到指定地址，不在乎响应结果。")])])]),t._v(" "),a("h2",{attrs:{id:"route-应用内路由插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#route-应用内路由插件"}},[t._v("#")]),t._v(" Route 应用内路由插件")]),t._v(" "),a("p",[t._v("处理应用内的路由跳转。")]),t._v(" "),a("h3",{attrs:{id:"path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#path"}},[t._v("#")]),t._v(" path")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型：")]),a("code",[t._v("{string}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("小程序当前页面的地址，格式与 "),a("code",[t._v("app.json")]),t._v(" 中配置的 pages 一致。")])])]),t._v(" "),a("h3",{attrs:{id:"query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[t._v("#")]),t._v(" query")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型：")]),a("code",[t._v("{Object}")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("小程序当前页面所携带的参数，与 "),a("a",{attrs:{href:"https://docs.alipay.com/mini/framework/page-detail#onloadquery-object",target:"_blank",rel:"noopener noreferrer"}},[t._v("Page#onLoad"),a("OutboundLink")],1),t._v(" 中传入 query 参数一致。")])])]),t._v(" "),a("h3",{attrs:{id:"redirect-url-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redirect-url-params"}},[t._v("#")]),t._v(" redirect(url, params?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} url")])]),t._v(" "),a("li",[a("code",[t._v("{Object} params")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("关闭当前页面，进入到 "),a("code",[t._v("url")]),t._v(" 参数指定的页面。")])])]),t._v(" "),a("h3",{attrs:{id:"back-n-defaulturl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#back-n-defaulturl"}},[t._v("#")]),t._v(" back(n, defaultUrl?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{number} n")])]),t._v(" "),a("li",[a("code",[t._v("{string} defaultUrl?")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("删除页面堆栈栈顶 "),a("code",[t._v("n")]),t._v(" 个元素，然后跳转到当前栈顶标识的页面。如果 "),a("code",[t._v("n")]),t._v(" 大于等于数组长度，那么会跳转到 "),a("code",[t._v("defaultUrl")]),t._v(" 所示地址（默认 "),a("code",[t._v("/")]),t._v("），压入页面栈。")])])]),t._v(" "),a("h3",{attrs:{id:"backto-url-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backto-url-options"}},[t._v("#")]),t._v(" backTo(url, options?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} url")])]),t._v(" "),a("li",[a("code",[t._v("{Object} options")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{number} removeStackLength")])]),t._v(" "),a("li",[a("code",[t._v("{Object} params")])])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("从页面堆栈栈顶开始，删除 "),a("code",[t._v("options.removeStackLength")]),t._v(" 个元素，如果 "),a("code",[t._v("options.removeStackLength")]),t._v(" 超过页面堆栈长度，则会移除所有元素。移除结束后，使用 "),a("code",[t._v("url")]),t._v(" 与 "),a("code",[t._v("options.params")]),t._v(" 整合成新的页面地址，跳转至该地址，并压入页面栈。")])])]),t._v(" "),a("h3",{attrs:{id:"replace-url-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#replace-url-params"}},[t._v("#")]),t._v(" replace(url, params?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} url")])]),t._v(" "),a("li",[a("code",[t._v("{Object} params?")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("移除页面堆栈中所有元素，将当前页面地址置为 url 和 params 所标识的页面地址，并压入页面堆栈。")])])]),t._v(" "),a("h3",{attrs:{id:"pushwindow-url-params-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pushwindow-url-params-2"}},[t._v("#")]),t._v(" pushWindow(url, params?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} url")])]),t._v(" "),a("li",[a("code",[t._v("{Object} params?")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("新建“标签页”，将其地址置为 "),a("code",[t._v("url")]),t._v(" 和 "),a("code",[t._v("params")]),t._v(" 所标识的地址。")])])]),t._v(" "),a("h3",{attrs:{id:"popwindow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#popwindow"}},[t._v("#")]),t._v(" popWindow()")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("删除当前“标签页”，回到上一个“标签页”。如果没有“上一个标签页”，则返回到首页。")])])]),t._v(" "),a("h3",{attrs:{id:"popto-delta"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#popto-delta"}},[t._v("#")]),t._v(" popTo(delta)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{number} delta")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("删除 delta 个“标签页”。如果溢出，则返回到首页。")])])]),t._v(" "),a("h2",{attrs:{id:"trace-业务埋点插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trace-业务埋点插件"}},[t._v("#")]),t._v(" Trace 业务埋点插件")]),t._v(" "),a("p",[t._v("上报业务埋点。")]),t._v(" "),a("h3",{attrs:{id:"logpv-spmb-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logpv-spmb-params"}},[t._v("#")]),t._v(" logPv(spmb, params?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} spmb")])]),t._v(" "),a("li",[a("code",[t._v("{Object} params?")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("切换 b 位，可以附带 "),a("code",[t._v("params")]),t._v(" 作为参数。")])])]),t._v(" "),a("h3",{attrs:{id:"before-name-hookfn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-name-hookfn"}},[t._v("#")]),t._v(" before(name, hookFn)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/gr89zc#before",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"call-methodname-args"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#call-methodname-args"}},[t._v("#")]),t._v(" call(methodName, ...args)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#u8guue",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"report-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#report-params"}},[t._v("#")]),t._v(" report(params)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#kwaeml",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"get-key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-key"}},[t._v("#")]),t._v(" get(key)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#sgzbbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"set-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-config"}},[t._v("#")]),t._v(" set(config)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#qls5yx",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"click-spmid-extraparams"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#click-spmid-extraparams"}},[t._v("#")]),t._v(" click(spmId, extraParams?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#3n56mz",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"expo-spmid-extraparams"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expo-spmid-extraparams"}},[t._v("#")]),t._v(" expo(spmId, extraParams?)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#fyugez",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"pagestate-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pagestate-name"}},[t._v("#")]),t._v(" pageState(name)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#5bghrf",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"info-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#info-params"}},[t._v("#")]),t._v(" info(params)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#wkcscg",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"parse-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parse-value"}},[t._v("#")]),t._v(" parse(value)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#9d9yrl",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"stringify-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stringify-value"}},[t._v("#")]),t._v(" stringify(value)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://yuque.antfin-inc.com/tracert/3.0/sv87oe#2qy2xa",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("h2",{attrs:{id:"log-日志插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log-日志插件"}},[t._v("#")]),t._v(" Log 日志插件")]),t._v(" "),a("p",[t._v("日志模块管理前端日志，可以将前端日志发送到指定服务器。")]),t._v(" "),a("p",[t._v("在本地开发时，日志会打印到控制台；部署之后，会将日志发送给服务器。当然，也可以实现自己的日志类，在线上环境不发送任何日志信息。")]),t._v(" "),a("h3",{attrs:{id:"log-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log-msg"}},[t._v("#")]),t._v(" log(msg)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string} msg")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("输出 log 级别的日志。")])])]),t._v(" "),a("h3",{attrs:{id:"warn-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#warn-msg"}},[t._v("#")]),t._v(" warn(msg)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string | Error} msg")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("输出 warn 级别的日志。")])])]),t._v(" "),a("h3",{attrs:{id:"debug-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug-msg"}},[t._v("#")]),t._v(" debug(msg)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string | Error} msg")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("输出 debug 级别的日志。")])])]),t._v(" "),a("h3",{attrs:{id:"error-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-msg"}},[t._v("#")]),t._v(" error(msg)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{string | Error} msg")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("输出 error 级别的日志。")])])]),t._v(" "),a("h3",{attrs:{id:"reportduration-type-name-fn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reportduration-type-name-fn"}},[t._v("#")]),t._v(" reportDuration(type, name, fn)")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{'h5' | 'rpc' | 'h5data'} type")])]),t._v(" "),a("li",[a("code",[t._v("{string} name")])]),t._v(" "),a("li",[a("code",[t._v("{() => Promise<R>} fn")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回值：")]),a("code",[t._v("Promise<R>")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明：")])]),t._v(" "),a("p",[t._v("输出 "),a("code",[t._v("fn")]),t._v(" 调用耗时日志，并会附带上一系列系统信息。")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);