(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{199:function(t,a,s){"use strict";s.r(a);var e=s(0),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"jsbridge-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsbridge-插件"}},[t._v("#")]),t._v(" JSBridge 插件")]),t._v(" "),s("p",[t._v("对容器 JS API 的封装，主要做以下提升：")]),t._v(" "),s("ol",[s("li",[t._v("屏蔽底层容器 API 的 bug；")]),t._v(" "),s("li",[t._v("屏蔽底层容器 API 的繁琐度；")]),t._v(" "),s("li",[t._v("提供更加友好的 Promise 风格 API。")])]),t._v(" "),s("h2",{attrs:{id:"pushwindow-url-params"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pushwindow-url-params"}},[t._v("#")]),t._v(" pushWindow(url, params?)")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("{string} url")])]),t._v(" "),s("li",[s("code",[t._v("{Object} params")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回值：")]),s("code",[t._v("{Promise<void>}")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("跳转内部 H5 页面或者应用，包括凤蝶页、离线包应用、小程序应用等。跳转成功之后，返回的 Promise 对象变为 resolved。")]),t._v(" "),s("p",[t._v("跳转的时候，会带上全局配置中的 "),s("code",[t._v("chInfo")]),t._v(" 参数；如果没有配置 "),s("code",[t._v("chInfo")]),t._v(" 参数，但是配置了 "),s("code",[t._v("appId")]),t._v(" 参数，则使用 "),s("code",[t._v("appId")]),t._v(" 构造 "),s("code",[t._v("chInfo")]),t._v(" 参数："),s("code",[t._v("ch_[appId]")]),t._v("；否则，不带 "),s("code",[t._v("chInfo")]),t._v(" 参数。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("示例：")])]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setupPage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usePlugins "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@alipay/goldfish'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bridge"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushWindow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://render.alipay.com/p/f/fd-jx2w06zl/index.html?chInfo=ch_internal__chsub_huodongyemian__zidingyi_pmp_mp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])])]),t._v(" "),s("h2",{attrs:{id:"getcurrentlocation-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getcurrentlocation-options"}},[t._v("#")]),t._v(" getCurrentLocation(options)")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("{Object} options")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回值：")]),s("code",[t._v("{Promise<Object>} location")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("获取定位。")]),t._v(" "),s("p",[s("code",[t._v("options")]),t._v(" 参数参考"),s("a",{attrs:{href:"https://docs.alipay.com/mini/api/mkxuqd#upyir",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方 API"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("返回的定位信息格式参考"),s("a",{attrs:{href:"https://docs.alipay.com/mini/api/mkxuqd#success-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方 API"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果当前页面参数上携带了定位信息，则此处会直接返回该定位信息，这样做主要是为了方便程序化地在多台设备上跑兼容性测试。")])])])]),t._v(" "),s("h2",{attrs:{id:"getstartupparams-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getstartupparams-options"}},[t._v("#")]),t._v(" getStartupParams(options?)")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("{Object} options?")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回值：")]),s("code",[t._v("{Promise<Object>}")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("对官方 API 的封装，参数和返回值格式都可以参考"),s("a",{attrs:{href:"http://jsapi.alipay.net/jsapi/util/get-startup-params.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h2",{attrs:{id:"reportbizready"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reportbizready"}},[t._v("#")]),t._v(" reportBizReady()")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("上报心跳，参考"),s("a",{attrs:{href:"https://yuque.antfin-inc.com/hybridinspect/stargazer/heartbeats",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("在全局模块中，完成初始化之后，会调用一次该方法，不需要手动调用。")])])])]),t._v(" "),s("h2",{attrs:{id:"getuserinfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getuserinfo"}},[t._v("#")]),t._v(" getUserInfo()")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("获取用户信息，参考"),s("a",{attrs:{href:"http://jsapi.alipay.net/jsapi/util/get-user-info.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h2",{attrs:{id:"getsysteminfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getsysteminfo"}},[t._v("#")]),t._v(" getSystemInfo()")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("获取系统信息，参考"),s("a",{attrs:{href:"https://docs.alipay.com/mini/api/system-info",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h2",{attrs:{id:"getnetworktype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getnetworktype"}},[t._v("#")]),t._v(" getNetworkType()")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("获取网络信息，参考"),s("a",{attrs:{href:"https://docs.alipay.com/mini/api/network-status",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h2",{attrs:{id:"getstorageitem-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getstorageitem-key"}},[t._v("#")]),t._v(" getStorageItem(key)")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("获取本地存储数据，底层使用的是 "),s("a",{attrs:{href:"https://docs.alipay.com/mini/api/azfobl",target:"_blank",rel:"noopener noreferrer"}},[t._v("my.getStorage"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h2",{attrs:{id:"setstorageitem-key-value"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setstorageitem-key-value"}},[t._v("#")]),t._v(" setStorageItem(key, value)")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("存储数据到本地，底层使用的是 "),s("a",{attrs:{href:"https://docs.alipay.com/mini/api/eocm6v",target:"_blank",rel:"noopener noreferrer"}},[t._v("my.setStorage"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h2",{attrs:{id:"getcurrenturl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getcurrenturl"}},[t._v("#")]),t._v(" getCurrentUrl()")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("获取当前页面的 URL 地址，拿到的地址格式与 "),s("code",[t._v("app.json")]),t._v(" 中配置的一样。")])])]),t._v(" "),s("h2",{attrs:{id:"callbridge-api-args"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#callbridge-api-args"}},[t._v("#")]),t._v(" callBridge(api, ...args?)")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("{string} api")])]),t._v(" "),s("li",[s("code",[t._v("{Array} args?")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("{Object | Function} args[0]")])]),t._v(" "),s("li",[s("code",[t._v("{Function} args[1]")])])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明：")])]),t._v(" "),s("p",[t._v("对 "),s("a",{attrs:{href:"https://docs.antfin.com/tinyapp/develop/api",target:"_blank",rel:"noopener noreferrer"}},[t._v("my.call"),s("OutboundLink")],1),t._v(" 的封装。")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);